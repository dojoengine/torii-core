// Generated by torii.js CLI
// Service: torii.sinks.log.LogSink

import { BaseSinkClient, setSchemaRegistry, type CallOptions } from '@toriijs/sdk';
import type { QueryLogsRequest, QueryLogsResponse, LogUpdate } from './types';
import { QueryLogsRequestSchema, QueryLogsResponseSchema, LogUpdateSchema, schemas } from './schema';

export class LogSinkClient extends BaseSinkClient {

  constructor(baseUrl: string) {
    super(baseUrl);
    setSchemaRegistry(schemas);
  }

  /**
   * QueryLogs - Unary RPC
   */
  async queryLogs(
    request: QueryLogsRequest = {} as QueryLogsRequest,
    options?: CallOptions
  ): Promise<QueryLogsResponse> {
    return this.unaryCall<QueryLogsResponse>('/torii.sinks.log.LogSink/QueryLogs', request as unknown as Record<string, unknown>, { ...options, requestSchema: QueryLogsRequestSchema, responseSchema: QueryLogsResponseSchema });
  }

  /**
   * SubscribeLogs - Server streaming RPC
   */
  async *subscribeLogs(
    request: QueryLogsRequest = {} as QueryLogsRequest,
    options?: CallOptions
  ): AsyncGenerator<LogUpdate> {
    yield* this.streamCall<LogUpdate>('/torii.sinks.log.LogSink/SubscribeLogs', request as unknown as Record<string, unknown>, { ...options, requestSchema: QueryLogsRequestSchema, responseSchema: LogUpdateSchema });
  }

  /**
   * SubscribeLogs with callbacks - Server streaming RPC
   */
  async onSubscribeLogs(
    request: QueryLogsRequest,
    onMessage: (message: LogUpdate) => void,
    onError?: (error: Error) => void,
    onConnected?: () => void
  ): Promise<() => void> {
    return this._subscribeWithCallbacks<LogUpdate>('/torii.sinks.log.LogSink/SubscribeLogs', request as unknown as Record<string, unknown>, onMessage, onError, onConnected, LogUpdateSchema);
  }
}
